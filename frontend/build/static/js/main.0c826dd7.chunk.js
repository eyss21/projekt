(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{112:function(e,a,t){"use strict";t.r(a);var r,c=t(0),n=t(25),s=t.n(n),o=t(14),l=t(132),i=t(120),j=t(121),d=t(87),b=t(28),m=t(1);const O=Object(b.a)(l.a)(r||(r=Object(o.a)(["\n  cursor: pointer;\n  text-align: center;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #f8f9fa;\n  transition: background-color 0.3s;\n  &:hover {\n    background-color: #e9ecef;\n  }\n"])));var h=e=>{let{onRoleSelect:a}=e;return Object(m.jsx)(i.a,{className:"vh-100 d-flex justify-content-center align-items-center",children:Object(m.jsxs)(j.a,{className:"w-100",children:[Object(m.jsx)(d.a,{md:6,children:Object(m.jsx)(O,{onClick:()=>a("carrier"),children:Object(m.jsx)(l.a.Body,{children:Object(m.jsx)(l.a.Title,{children:"Przewo\u017anik"})})})}),Object(m.jsx)(d.a,{md:6,children:Object(m.jsx)(O,{onClick:()=>a("customer"),children:Object(m.jsx)(l.a.Body,{children:Object(m.jsx)(l.a.Title,{children:"Klient"})})})})]})})},u=t(130),x=t(138),p=t(137),g=t(134),w=t(135),y=t(124),f=t(93);var v=()=>Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Flota"}),Object(m.jsx)("p",{children:"Informacje o flocie."})]});var S=()=>Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Rozk\u0142ad jazdy"}),Object(m.jsx)("p",{children:"Informacje o rozk\u0142adzie jazdy."})]});var C,k,P,N,z=()=>Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Zam\xf3wienia"}),Object(m.jsx)("p",{children:"Informacje o zam\xf3wieniach."})]}),$=t(136),_=t(129);const I=Object(u.a)(C||(C=Object(o.a)(["\n  query GetUserProfile($email: String!) {\n    getUserProfile(email: $email) {\n      email\n      company_name\n      postal_code\n      city\n      street\n    }\n  }\n"]))),L=Object(u.a)(k||(k=Object(o.a)(["\n  mutation UpdateProfile($email: String!, $company_name: String!, $postal_code: String!, $city: String!, $street: String!) {\n    updateProfile(email: $email, company_name: $company_name, postal_code: $postal_code, city: $city, street: $street) {\n      email\n      company_name\n      postal_code\n      city\n      street\n    }\n  }\n"]))),U=Object(u.a)(P||(P=Object(o.a)(["\n  mutation UpdatePassword($email: String!, $oldPassword: String!, $newPassword: String!) {\n    updatePassword(email: $email, oldPassword: $oldPassword, newPassword: $newPassword)\n  }\n"]))),H=Object(b.a)(l.a)(N||(N=Object(o.a)(["\n  width: 100%;\n  max-width: 400px;\n  padding: 20px;\n  background-color: #f8f9fa;\n  border: none;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n"])));var q,B,G=()=>{const[e]=Object(c.useState)(localStorage.getItem("email")),{data:a,loading:t,error:r}=Object($.a)(I,{variables:{email:e}}),[n,s]=Object(c.useState)(""),[o,l]=Object(c.useState)(""),[i,j]=Object(c.useState)(""),[d,b]=Object(c.useState)(""),[O,h]=Object(c.useState)(""),[u,g]=Object(c.useState)(""),[w,f]=Object(c.useState)(!1),[v,S]=Object(c.useState)(!1),[C,{loading:k,error:P}]=Object(x.a)(L),[N,{loading:z,error:q}]=Object(x.a)(U);Object(c.useEffect)((()=>{if(a&&a.getUserProfile){const{company_name:e,postal_code:t,city:r,street:c}=a.getUserProfile;s(e),l(t),j(r),b(c)}}),[a]);return Object(m.jsxs)("div",{children:[!w&&!v&&Object(m.jsxs)(H,{children:[Object(m.jsx)("h2",{className:"text-center",children:"M\xf3j Profil"}),Object(m.jsxs)("p",{children:["Email: ",e]}),Object(m.jsxs)("p",{children:["Nazwa Firmy: ",n]}),Object(m.jsxs)("p",{children:["Kod Pocztowy: ",o]}),Object(m.jsxs)("p",{children:["Miasto: ",i]}),Object(m.jsxs)("p",{children:["Ulica: ",d]}),Object(m.jsx)(y.a,{variant:"primary",className:"w-100 mt-3",onClick:()=>f(!0),children:"Edytuj Profil"}),Object(m.jsx)(y.a,{variant:"secondary",className:"w-100 mt-3",onClick:()=>S(!0),children:"Zmie\u0144 Has\u0142o"})]}),w&&Object(m.jsxs)(H,{children:[Object(m.jsx)("h2",{className:"text-center",children:"Edytuj Profil"}),Object(m.jsxs)(_.a,{onSubmit:async a=>{a.preventDefault();try{await C({variables:{email:e,company_name:n,postal_code:o,city:i,street:d}}),alert("Profil zosta\u0142 zaktualizowany."),f(!1)}catch(t){console.error(t)}},children:[Object(m.jsxs)(_.a.Group,{controlId:"formCompanyName",children:[Object(m.jsx)(_.a.Label,{children:"Nazwa Firmy"}),Object(m.jsx)(_.a.Control,{type:"text",value:n,onChange:e=>s(e.target.value),placeholder:"Nazwa Firmy",required:!0})]}),Object(m.jsxs)(_.a.Group,{controlId:"formPostalCode",children:[Object(m.jsx)(_.a.Label,{children:"Kod Pocztowy"}),Object(m.jsx)(_.a.Control,{type:"text",value:o,onChange:e=>l(e.target.value),placeholder:"Kod Pocztowy",required:!0})]}),Object(m.jsxs)(_.a.Group,{controlId:"formCity",children:[Object(m.jsx)(_.a.Label,{children:"Miasto"}),Object(m.jsx)(_.a.Control,{type:"text",value:i,onChange:e=>j(e.target.value),placeholder:"Miasto",required:!0})]}),Object(m.jsxs)(_.a.Group,{controlId:"formStreet",children:[Object(m.jsx)(_.a.Label,{children:"Ulica"}),Object(m.jsx)(_.a.Control,{type:"text",value:d,onChange:e=>b(e.target.value),placeholder:"Ulica",required:!0})]}),Object(m.jsx)(y.a,{variant:"primary",type:"submit",className:"w-100 mt-3",disabled:k,children:"Zaktualizuj Profil"}),P&&Object(m.jsxs)(p.a,{variant:"danger",className:"mt-3",children:["B\u0142\u0105d aktualizacji profilu! ",P.message]})]}),Object(m.jsx)(y.a,{variant:"secondary",className:"w-100 mt-3",onClick:()=>f(!1),children:"Anuluj"})]}),v&&Object(m.jsxs)(H,{className:"mt-4",children:[Object(m.jsx)("h2",{className:"text-center",children:"Zmiana Has\u0142a"}),Object(m.jsxs)(_.a,{onSubmit:async a=>{a.preventDefault();try{await N({variables:{email:e,oldPassword:O,newPassword:u}}),alert("Has\u0142o zosta\u0142o zmienione."),S(!1)}catch(t){console.error(t)}},children:[Object(m.jsxs)(_.a.Group,{controlId:"formOldPassword",children:[Object(m.jsx)(_.a.Label,{children:"Stare Has\u0142o"}),Object(m.jsx)(_.a.Control,{type:"password",value:O,onChange:e=>h(e.target.value),placeholder:"Stare Has\u0142o",required:!0})]}),Object(m.jsxs)(_.a.Group,{controlId:"formNewPassword",children:[Object(m.jsx)(_.a.Label,{children:"Nowe Has\u0142o"}),Object(m.jsx)(_.a.Control,{type:"password",value:u,onChange:e=>g(e.target.value),placeholder:"Nowe Has\u0142o",required:!0})]}),Object(m.jsx)(y.a,{variant:"primary",type:"submit",className:"w-100 mt-3",disabled:z,children:"Zmie\u0144 Has\u0142o"}),q&&Object(m.jsxs)(p.a,{variant:"danger",className:"mt-3",children:["B\u0142\u0105d zmiany has\u0142a! ",q.message]})]}),Object(m.jsx)(y.a,{variant:"secondary",className:"w-100 mt-3",onClick:()=>S(!1),children:"Anuluj"})]})]})};const Z=Object(u.a)(q||(q=Object(o.a)(["\n  mutation DeleteUser($email: String!) {\n    deleteUser(email: $email)\n  }\n"]))),E=Object(u.a)(B||(B=Object(o.a)(["\n  mutation LogoutUser() {\n    logoutUser()\n  }\n"])));var K=e=>{let{onLogout:a}=e;const[t]=Object(c.useState)(localStorage.getItem("email")),[r,{data:n,loading:s,error:o}]=Object(x.a)(Z),[l,{logout_data:j}]=Object(x.a)(E),[d,b]=Object(c.useState)(!1),[O,h]=Object(c.useState)("fleet"),[u,C]=Object(c.useState)(!1),k=()=>C(!1);return d?Object(m.jsx)(p.a,{variant:"success",children:"Twoje konto zosta\u0142o pomy\u015blnie usuni\u0119te."}):Object(m.jsxs)("div",{children:[Object(m.jsx)(g.a,{bg:"light",expand:"lg",children:Object(m.jsxs)(i.a,{children:[Object(m.jsx)(g.a.Brand,{href:"#",children:"Panel Przewo\u017anika"}),Object(m.jsx)(g.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(m.jsx)(g.a.Collapse,{id:"basic-navbar-nav",children:Object(m.jsx)(w.a,{className:"me-auto",children:Object(m.jsx)(y.a,{variant:"light",onClick:()=>C(!0),children:Object(m.jsx)("span",{className:"navbar-toggler-icon"})})})})]})}),Object(m.jsxs)(f.a,{show:u,onHide:k,children:[Object(m.jsx)(f.a.Header,{closeButton:!0,children:Object(m.jsx)(f.a.Title,{children:"Menu"})}),Object(m.jsx)(f.a.Body,{children:Object(m.jsxs)(w.a,{className:"flex-column",children:[Object(m.jsx)(w.a.Link,{onClick:()=>{h("fleet"),k()},children:"Flota"}),Object(m.jsx)(w.a.Link,{onClick:()=>{h("schedule"),k()},children:"Rozk\u0142ad jazdy"}),Object(m.jsx)(w.a.Link,{onClick:()=>{h("orders"),k()},children:"Zam\xf3wienia"}),Object(m.jsx)(w.a.Link,{onClick:()=>{h("profile"),k()},children:"M\xf3j Profil"}),Object(m.jsx)(w.a.Link,{className:"mt-auto",onClick:async()=>{if(window.confirm("Wylogowac Cie z aktualnej sesji?"))try{await l({variables:{email:t}});alert(response.logout_data.logoutUser),a()}catch(e){console.error("po chuju:"+e)}},disabled:s,style:{color:"orange"},children:"Wyloguj"}),Object(m.jsx)(w.a.Link,{className:"mt-auto",onClick:async()=>{if(window.confirm("Czy na pewno chcesz usun\u0105\u0107 swoje konto?"))try{"User deleted"===(await r({variables:{email:t}})).data.deleteUser?(alert("Konto zosta\u0142o usuni\u0119te."),localStorage.removeItem("token"),localStorage.removeItem("email"),b(!0),a()):alert("Nie uda\u0142o si\u0119 usun\u0105\u0107 konta.")}catch(e){console.error(e)}},disabled:s,style:{color:"red"},children:"Usu\u0144 Konto"})]})})]}),Object(m.jsxs)(i.a,{className:"mt-3",children:["fleet"===O&&Object(m.jsx)(v,{}),"schedule"===O&&Object(m.jsx)(S,{}),"orders"===O&&Object(m.jsx)(z,{}),"profile"===O&&Object(m.jsx)(G,{}),o&&Object(m.jsxs)(p.a,{variant:"danger",className:"mt-3",children:["B\u0142\u0105d usuwania konta! ",o.message]})]})]})};var M,R,F=()=>Object(m.jsx)("div",{children:Object(m.jsx)("h2",{children:"Panel Klienta"})});const D=Object(u.a)(M||(M=Object(o.a)(["\n  mutation LoginUser($email: String!, $password: String!) {\n    loginUser(email: $email, password: $password)\n  }\n"]))),T=Object(b.a)(l.a)(R||(R=Object(o.a)(["\n  width: 100%;\n  max-width: 400px;\n  padding: 20px;\n  background-color: #f8f9fa;\n  border: none;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n"])));var W,A,J=e=>{let{onLoginSuccess:a,onRegister:t}=e;const[r,n]=Object(c.useState)(""),[s,o]=Object(c.useState)(""),[l,{data:i,loading:j,error:d}]=Object(x.a)(D),[b,O]=Object(c.useState)(!1);return Object(m.jsxs)(T,{children:[Object(m.jsx)("h2",{className:"text-center",children:"Logowanie Przewo\u017anika"}),Object(m.jsxs)(_.a,{onSubmit:async e=>{e.preventDefault();try{const e=await l({variables:{email:r,password:s}});e.data.loginUser?(localStorage.setItem("token",e.data.loginUser),localStorage.setItem("email",r),O(!1),a()):O(!0)}catch(t){console.error(t),O(!0)}},children:[Object(m.jsxs)(_.a.Group,{controlId:"formBasicEmail",children:[Object(m.jsx)(_.a.Label,{children:"Email"}),Object(m.jsx)(_.a.Control,{type:"email",value:r,onChange:e=>n(e.target.value),placeholder:"Wprowad\u017a email",required:!0})]}),Object(m.jsxs)(_.a.Group,{controlId:"formBasicPassword",children:[Object(m.jsx)(_.a.Label,{children:"Has\u0142o"}),Object(m.jsx)(_.a.Control,{type:"password",value:s,onChange:e=>o(e.target.value),placeholder:"Has\u0142o",required:!0})]}),Object(m.jsx)(y.a,{variant:"primary",type:"submit",className:"w-100 mt-3",disabled:j,children:"Zaloguj si\u0119"}),b&&Object(m.jsx)(p.a,{variant:"danger",className:"mt-3",children:"B\u0142\u0105d logowania! Nieprawid\u0142owy email lub has\u0142o."})]}),Object(m.jsx)(y.a,{variant:"link",onClick:t,className:"w-100 mt-2",children:"Zarejestruj si\u0119"})]})};const Q=Object(u.a)(W||(W=Object(o.a)(["\n  mutation RegisterUser($email: String!, $password: String!, $company_name: String!, $postal_code: String!, $city: String!, $street: String!) {\n    registerUser(email: $email, password: $password, company_name: $company_name, postal_code: $postal_code, city: $city, street: $street) {\n      user_id\n      email\n    }\n  }\n"]))),V=Object(b.a)(l.a)(A||(A=Object(o.a)(["\n  width: 100%;\n  max-width: 400px;\n  padding: 20px;\n  background-color: #f8f9fa;\n  border: none;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n"])));var X,Y=e=>{let{onCancel:a}=e;const[t,r]=Object(c.useState)({email:"",password:"",confirmPassword:"",company_name:"",postal_code:"",city:"",street:""}),[n,{loading:s,error:o}]=Object(x.a)(Q),[l,i]=Object(c.useState)(!1),j=e=>{r({...t,[e.target.name]:e.target.value})};return l?Object(m.jsxs)(V,{children:[Object(m.jsx)(p.a,{variant:"success",children:"Konto zosta\u0142o za\u0142o\u017cone pomy\u015blnie!"}),Object(m.jsx)(y.a,{variant:"primary",className:"w-100 mt-3",onClick:a,children:"Zaloguj si\u0119"})]}):Object(m.jsxs)(V,{children:[Object(m.jsx)("h2",{className:"text-center",children:"Rejestracja Przewo\u017anika"}),Object(m.jsxs)(_.a,{onSubmit:async e=>{e.preventDefault();const a=(()=>{const{email:e,password:a,confirmPassword:r,company_name:c,postal_code:n,city:s,street:o}=t;return e&&a&&r&&c&&n&&s&&o?a!==r?"Has\u0142a nie pasuj\u0105 do siebie":/^(?=.*[A-Z])(?=.*\d).{8,}$/.test(a)?null:"Has\u0142o musi zawiera\u0107 co najmniej jedn\u0105 wielk\u0105 liter\u0119, cyfr\u0119 i mie\u0107 d\u0142ugo\u015b\u0107 co najmniej 8 znak\xf3w":"Wszystkie pola s\u0105 wymagane"})();if(a)alert(a);else try{await n({variables:{...t}}),i(!0)}catch(r){console.error(r)}},children:[Object(m.jsxs)(_.a.Group,{controlId:"formBasicEmail",children:[Object(m.jsx)(_.a.Label,{children:"Email"}),Object(m.jsx)(_.a.Control,{type:"email",name:"email",value:t.email,onChange:j,placeholder:"Wprowad\u017a email",required:!0})]}),Object(m.jsxs)(_.a.Group,{controlId:"formBasicPassword",children:[Object(m.jsx)(_.a.Label,{children:"Has\u0142o"}),Object(m.jsx)(_.a.Control,{type:"password",name:"password",value:t.password,onChange:j,placeholder:"Has\u0142o",required:!0})]}),Object(m.jsxs)(_.a.Group,{controlId:"formConfirmPassword",children:[Object(m.jsx)(_.a.Label,{children:"Potwierd\u017a Has\u0142o"}),Object(m.jsx)(_.a.Control,{type:"password",name:"confirmPassword",value:t.confirmPassword,onChange:j,placeholder:"Potwierd\u017a Has\u0142o",required:!0})]}),Object(m.jsxs)(_.a.Group,{controlId:"formCompanyName",children:[Object(m.jsx)(_.a.Label,{children:"Nazwa Firmy"}),Object(m.jsx)(_.a.Control,{type:"text",name:"company_name",value:t.company_name,onChange:j,placeholder:"Nazwa Firmy",required:!0})]}),Object(m.jsxs)(_.a.Group,{controlId:"formPostalCode",children:[Object(m.jsx)(_.a.Label,{children:"Kod Pocztowy"}),Object(m.jsx)(_.a.Control,{type:"text",name:"postal_code",value:t.postal_code,onChange:j,placeholder:"Kod Pocztowy",required:!0})]}),Object(m.jsxs)(_.a.Group,{controlId:"formCity",children:[Object(m.jsx)(_.a.Label,{children:"Miasto"}),Object(m.jsx)(_.a.Control,{type:"text",name:"city",value:t.city,onChange:j,placeholder:"Miasto",required:!0})]}),Object(m.jsxs)(_.a.Group,{controlId:"formStreet",children:[Object(m.jsx)(_.a.Label,{children:"Ulica"}),Object(m.jsx)(_.a.Control,{type:"text",name:"street",value:t.street,onChange:j,placeholder:"Ulica",required:!0})]}),Object(m.jsx)(y.a,{variant:"primary",type:"submit",className:"w-100 mt-3",disabled:s,children:"Zarejestruj si\u0119"}),o&&Object(m.jsxs)(p.a,{variant:"danger",className:"mt-3",children:["B\u0142\u0105d rejestracji! ",o.message]})]}),Object(m.jsx)(y.a,{variant:"link",onClick:a,className:"w-100 mt-2",children:"Anuluj"})]})};const ee=b.a.div(X||(X=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  justify-content: center;\n  align-items: center;\n  background-color: #f0f2f5;\n"])));var ae=function(){const[e,a]=Object(c.useState)(null),[t,r]=Object(c.useState)(!1),[n,s]=Object(c.useState)(!1);return Object(c.useEffect)((()=>{localStorage.getItem("token")&&(r(!0),a("carrier"))}),[]),Object(m.jsxs)(ee,{children:[!e&&Object(m.jsx)(h,{onRoleSelect:e=>{a(e)}}),"carrier"===e&&!t&&!n&&Object(m.jsx)(J,{onLoginSuccess:()=>{r(!0)},onRegister:()=>{s(!0)}}),"carrier"===e&&!t&&n&&Object(m.jsx)(Y,{onCancel:()=>{s(!1)}}),"carrier"===e&&t&&Object(m.jsx)(K,{onLogout:()=>{a(null),r(!1),s(!1),localStorage.removeItem("token"),localStorage.removeItem("email")}}),"customer"===e&&Object(m.jsx)(F,{})]})},te=t(128),re=t(94),ce=t(131),ne=t(133),se=t(92);const oe=Object(re.a)({uri:"http://localhost:8000/graphql"}),le=Object(se.a)(((e,a)=>{let{headers:t}=a;const r=localStorage.getItem("token");return{headers:{...t,authorization:r?"Bearer ".concat(r):""}}}));var ie=new ce.a({link:le.concat(oe),cache:new ne.a});t(111);s.a.render(Object(m.jsx)(te.a,{client:ie,children:Object(m.jsx)(ae,{})}),document.getElementById("root"))}},[[112,1,2]]]);
//# sourceMappingURL=main.0c826dd7.chunk.js.map